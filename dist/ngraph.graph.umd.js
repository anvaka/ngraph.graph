(function(E,w){typeof exports=="object"&&typeof module<"u"?module.exports=w():typeof define=="function"&&define.amd?define(w):(E=typeof globalThis<"u"?globalThis:E||self,E.createGraph=w())})(this,(function(){"use strict";function E(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var w,M;function F(){if(M)return w;M=1,w=function(i){f(i);var a=t(i);return i.on=a.on,i.off=a.off,i.fire=a.fire,i};function t(u){var i=Object.create(null);return{on:function(a,h,v){if(typeof h!="function")throw new Error("callback is expected to be a function");var c=i[a];return c||(c=i[a]=[]),c.push({callback:h,ctx:v}),u},off:function(a,h){var v=typeof a>"u";if(v)return i=Object.create(null),u;if(i[a]){var c=typeof h!="function";if(c)delete i[a];else for(var g=i[a],l=0;l<g.length;++l)g[l].callback===h&&g.splice(l,1)}return u},fire:function(a){var h=i[a];if(!h)return u;var v;arguments.length>1&&(v=Array.prototype.splice.call(arguments,1));for(var c=0;c<h.length;++c){var g=h[c];g.callback.apply(g.ctx,v)}return u}}}function f(u){if(!u)throw new Error("Eventify cannot use falsy object as events subject");for(var i=["on","fire","off"],a=0;a<i.length;++a)if(u.hasOwnProperty(i[a]))throw new Error("Subject cannot be eventified, since it already has property '"+i[a]+"'")}return w}var P=F();const b=E(P);function A(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),t.multigraph=t.uniqueLinkId),t.multigraph===void 0&&(t.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var f=new Map,u=new Map,i={},a=0,h=t.multigraph?B:Y,v=[],c=x,g=x,l=x,y=x,k={version:20,addNode:C,addLink:W,removeLink:J,removeNode:U,getNode:p,getNodeCount:R,getLinkCount:q,getEdgeCount:q,getLinksCount:q,getNodesCount:R,getLinks:H,forEachNode:_,forEachLinkedNode:X,forEachLink:Q,beginUpdate:l,endUpdate:y,clear:K,hasLink:N,hasNode:p,getLink:N};return b(k),G(),k;function G(){var e=k.on;k.on=n;function n(){return k.beginUpdate=l=j,k.endUpdate=y=I,c=D,g=V,k.on=e,e.apply(k,arguments)}}function D(e,n){v.push({link:e,changeType:n})}function V(e,n){v.push({node:e,changeType:n})}function C(e,n){if(e===void 0)throw new Error("Invalid node identifier");l();var r=p(e);return r?(r.data=n,g(r,"update")):(r=new z(e,n),g(r,"add")),f.set(e,r),y(),r}function p(e){return f.get(e)}function U(e){var n=p(e);if(!n)return!1;l();var r=n.links;return r&&(r.forEach(T),n.links=null),f.delete(e),g(n,"remove"),y(),!0}function W(e,n,r){l();var o=p(e)||C(e),s=p(n)||C(n),d=h(e,n,r),L=u.has(d.id);return u.set(d.id,d),S(o,d),e!==n&&S(s,d),c(d,L?"update":"add"),y(),d}function Y(e,n,r){var o=m(e,n),s=u.get(o);return s?(s.data=r,s):new O(e,n,r,o)}function B(e,n,r){var o=m(e,n),s=i.hasOwnProperty(o);if(s||N(e,n)){s||(i[o]=0);var d="@"+ ++i[o];o=m(e+d,n+d)}return new O(e,n,r,o)}function R(){return f.size}function q(){return u.size}function H(e){var n=p(e);return n?n.links:null}function J(e,n){return n!==void 0&&(e=N(e,n)),T(e)}function T(e){if(!e||!u.get(e.id))return!1;l(),u.delete(e.id);var n=p(e.fromId),r=p(e.toId);return n&&n.links.delete(e),r&&r.links.delete(e),c(e,"remove"),y(),!0}function N(e,n){if(!(e===void 0||n===void 0))return u.get(m(e,n))}function K(){l(),_(function(e){U(e.id)}),y()}function Q(e){if(typeof e=="function")for(var n=u.values(),r=n.next();!r.done;){if(e(r.value))return!0;r=n.next()}}function X(e,n,r){var o=p(e);if(o&&o.links&&typeof n=="function")return r?$(o.links,e,n):Z(o.links,e,n)}function Z(e,n,r){for(var o,s=e.values(),d=s.next();!d.done;){var L=d.value,ee=L.fromId===n?L.toId:L.fromId;if(o=r(f.get(ee),L),o)return!0;d=s.next()}}function $(e,n,r){for(var o,s=e.values(),d=s.next();!d.done;){var L=d.value;if(L.fromId===n&&(o=r(f.get(L.toId),L),o))return!0;d=s.next()}}function x(){}function j(){a+=1}function I(){a-=1,a===0&&v.length>0&&(k.fire("changed",v),v.length=0)}function _(e){if(typeof e!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+e);for(var n=f.values(),r=n.next();!r.done;){if(e(r.value))return!0;r=n.next()}}}function z(t,f){this.id=t,this.links=null,this.data=f}function S(t,f){t.links?t.links.add(f):t.links=new Set([f])}function O(t,f,u,i){this.fromId=t,this.toId=f,this.data=u,this.id=i}function m(t,f){return t.toString()+"ðŸ‘‰ "+f.toString()}return A}));
//# sourceMappingURL=ngraph.graph.umd.js.map
